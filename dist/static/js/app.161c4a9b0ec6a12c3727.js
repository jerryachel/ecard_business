webpackJsonp([1],{0:function(e,t,a){a("briU"),e.exports=a("NHnr")},"6IGF":function(e,t){},"8MWK":function(e,t){},Cj8T:function(e,t){},"E/Z7":function(e,t){},JMlG:function(e,t){},JnIk:function(e,t,a){"use strict";var s=a("xWy6"),r=a.n(s),o=a("w3ST"),i=function(e){a("JMlG")},l=a("8AGX")(r.a,o.a,!1,i,null,null);t.default=l.exports},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("c3k3");var s=a("h/uP"),r=a.n(s),o=a("VCXJ"),i=a("DjdX"),l=a.n(i),n=a("y32R"),c=a.n(n),d=a("rVsN"),u=a.n(d),m=a("l7L6"),p=a.n(m),v=a("2sCs"),h=a.n(v),f=a("uAC3"),_=a.n(f),g=window.location.hostname;console.log(g);var b=h.a.create({baseURL:"localhost"==g||"merchant.ecard"==g?"http://api.ecard":"https://api.ecard.life",timeout:1e4,showLoading:!0,loadingContainer:"body",session:!1}),y=void 0;b.interceptors.request.use(function(e){return e.showLoading&&(y=p.a.service({target:document.querySelector(e.loadingContainer)})),e.session&&_.a.get("user_info")&&(e.headers.s=JSON.parse(_.a.get("user_info")).session),e},function(e){console.log(e),u.a.reject(e)}),b.interceptors.response.use(function(e){return y&&y.close(),410==e.data.code&&c.a.alert("登录状态已失效，请重新登录","提示",{confirmButtonText:"确定",callback:function(e){_.a.remove("user_info"),window.location.reload()}}),e.data},function(e){return console.log("err"+e),y&&y.close(),l()({showClose:!0,message:"Failed to get data, please refresh to try again",type:"error"}),u.a.reject(e)});var w=b,C={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]},k=a("8AGX")({name:"app",created:function(){this.$store.state.user_info.session?this.$store.dispatch("user_account",this.$store.state.user_info.session):this.$route.meta.requiresAuth&&this.$router.push("/login")}},C,!1,function(e){a("E/Z7")},null,null).exports,T=a("zO6J"),F=a("JnIk"),x=a("KPSb"),P=a.n(x),$={data:function(){return{isLoginByPassword:!0,sendCodeText:"Send code",loginForm:{email:"",password:""},rules:{email:[{required:!0,validator:function(e,t,a){if(""===t||void 0==t)return a(new Error("Please enter email")),!1;/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/.test(t)?a():a(new Error("Please input the correct email"))},trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"Please enter password"}]}}},components:{loginNav:F.default},mounted:function(){_.a.getJSON("login")&&_.a.getJSON("login").isRemember&&(this.loginForm.email=_.a.getJSON("login").loginName)},methods:{sendCode:function(){function e(){var s=setTimeout(function(){0==t?(a.sendCodeText="Send code",clearTimeout(s)):(a.sendCodeText=t+"s",t--,e())},1e3)}if(!/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/.test(this.loginForm.email))return this.$message.error("Please input the correct email"),!1;var t=120,a=this;e(),w.get("/auth/authMail.do",{params:{email:this.loginForm.email},loadingContainer:".send_code_btn"}).then(function(e){console.log(e)})},submit:function(){var e=this;this.$refs.loginForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;var a=e.isLoginByPassword?"/merchantAuth/merchantLoginByEmailWithPassword.do":"/merchantAuth/merchantLoginByEmailWithCode.do",s=e.isLoginByPassword?{email:e.loginForm.email,password:P()(e.loginForm.password).toLowerCase()}:{email:e.loginForm.email,code:e.loginForm.password};w({method:"post",url:a,headers:{"Content-type":"multipart/form-data"},params:s}).then(function(t){if(console.log(t),200==t.code){var a=t.data;e.$store.dispatch("login",a),e.$store.dispatch("user_account",a.session),e.$router.push("/"),_.a.getJSON("login")?_.a.set("login",{loginName:e.loginForm.email,isRemember:_.a.getJSON("login").isRemember},{expires:7}):_.a.set("login",{loginName:e.loginForm.email,isRemember:!0},{expires:7})}else e.$message.error(t.msg)})})}}},S={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("login-nav"),e._v(" "),a("el-form",{ref:"loginForm",staticClass:"login_form",attrs:{model:e.loginForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{"label-width":"0",prop:"email"}},[a("el-input",{attrs:{placeholder:"Email",clearable:""},model:{value:e.loginForm.email,callback:function(t){e.$set(e.loginForm,"email",t)},expression:"loginForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"password"}},[a("el-input",{staticClass:"forget_password",attrs:{type:"password",placeholder:e.isLoginByPassword?"Password":"Code",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.submit(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[e.isLoginByPassword?a("template",{slot:"append"},[a("router-link",{attrs:{to:"/resetPassword"}},[e._v("\n\t\t\t\t\t\t忘记密码？\n\t\t\t\t\t")])],1):a("template",{slot:"append"},[a("el-button",{staticClass:"send_code_btn",attrs:{size:"medium",disabled:"Send code"!==e.sendCodeText,type:"primary"},on:{click:e.sendCode}},[e._v(e._s(e.sendCodeText))])],1)],2)],1),e._v(" "),e.isLoginByPassword?a("p",{staticClass:"login_by_code",on:{click:function(t){e.isLoginByPassword=!e.isLoginByPassword}}},[e._v("使用邮箱验证码登录")]):a("p",{staticClass:"login_by_code",on:{click:function(t){e.isLoginByPassword=!e.isLoginByPassword}}},[e._v("使用密码登录")]),e._v(" "),a("router-link",{staticClass:"to_register",attrs:{to:"/register"}},[e._v("新用户? 立即注册")]),e._v(" "),a("el-button",{staticClass:"login_btn",attrs:{type:"primary"},on:{click:e.submit}},[e._v("Login")])],1)],1)},staticRenderFns:[]},N=a("8AGX")($,S,!1,function(e){a("Cj8T")},null,null).exports,A=(a("DEjr"),{components:{loginNav:F.default},data:function(){return{baseUrl:"localhost"==window.location.hostname||"merchant.ecard"==window.location.hostname?"http://api.ecard":"https://api.ecard.life",sendCodeText:"Send code",companyTypeList:[],stateList:[],rules:{email:[{required:!0,validator:function(e,t,a){if(""===t||void 0==t)return a(new Error("Please enter email")),!1;/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/.test(t)?a():a(new Error("Please input the correct email"))},trigger:"blur"}],msgCode:[{required:!0,message:"Please enter code",trigger:"blur"}],company_type:[{required:!0,message:"Please select industry type",trigger:"change"}],enName:[{required:!0,message:"Please enter company name (English)",trigger:"blur"}],cnName:[{required:!1,trigger:"blur"}],lastName:[{required:!0,message:"Please enter last name",trigger:"blur"}],firstName:[{required:!0,message:"Please enter first name",trigger:"blur"}],midName:[{required:!1,trigger:"blur"}],telPhone:[{required:!0,message:"Please enter contact number",trigger:"blur"}],password:[{required:!0,trigger:"blur"}],paySecret:[{validator:function(e,t,a){if(""===t||void 0==t)return a(),!1;6===t.length&&/^\d+$/.test(t)?a():a(new Error("Please enter 6 numerical digits password"))}}],address1:[{required:!0,message:"Please enter address line 1",trigger:"blur"}],address2:[{required:!1,trigger:"blur"}],city:[{required:!0,message:"Please enter city",trigger:"blur"}],state:[{required:!0,message:"Please select state / province",trigger:"change"}],zipCode:[{required:!0,message:"Please enter zip code",trigger:"blur"}],inviteCode:[{required:!1,trigger:"blur"}],cashBack:[{required:!0,validator:function(e,t,a){if(""===t||void 0==t)return a(new Error("Please enter cashback")),!1;NaN!==parseFloat(t)&&parseFloat(t)<10?a(new Error("Input data can not be less than 10%")):NaN!==parseFloat(t)&&parseFloat(t)>100?a(new Error("Please enter the correct cashback")):a()}}]},curPage:1,hour1:{startTime:"00:00",endTime:"23:00"},week1_value:1,week1:[{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6},{label:"Sunday",value:7}],week2_value:5,week2:[{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6},{label:"Sunday",value:7}],hour2:{startTime:"",endTime:""},week3_value:"",week3:[{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6},{label:"Sunday",value:7}],week4_value:"",week4:[{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6},{label:"Sunday",value:7}],hour3:{startTime:"",endTime:""},week5_value:"",week5:[{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6},{label:"Sunday",value:7}],week6_value:"",week6:[{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6},{label:"Sunday",value:7}],card_type:"1",notifier:!0,agreement:!1,imageUrl:"",picUrl:"",ruleForm:{email:"",msgCode:"",company_type:"",enName:"",cnName:"",lastName:"",firstName:"",midName:"",telPhone:"",password:"",paySecret:"",address1:"",address2:"",city:"",state:"",zipCode:"",inviteCode:"",cashBack:"",location:{lng:"",lat:""}},uploadLoading:""}},created:function(){var e=this;w.get("/info/cateType/list.do",{params:{cateName:""},showLoading:!1}).then(function(t){console.log(t),e.companyTypeList=t.data}),w.get("/info/state/list.do",{params:{stateName:""},showLoading:!1}).then(function(t){console.log(t),e.stateList=t.data})},methods:{handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw),console.log(e),this.imageUrl=e.data.imageUrl,this.uploadLoading.close()},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type,s=e.size/1024/1024<2;return t||a?s?(this.uploadLoading=this.$loading({target:document.querySelector(".avatar-uploader .el-upload")}),(a||t)&&s):(this.$message.error("Image size can not exceed 2MB"),!1):(this.$message.error("Only upload jpg / png files"),!1)},handleImgFail:function(e,t,a){this.$message.error(e),this.uploadLoading.close()},handlePicSuccess:function(e,t){this.picUrl=URL.createObjectURL(t.raw),console.log(e),this.picUrl=e.data.imageUrl,this.uploadLoading.close()},beforePicUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type,s=e.size/1024/1024<2;return t||a?s?(this.uploadLoading=this.$loading({target:document.querySelector(".upload_drag .el-upload")}),(a||t)&&s):(this.$message.error("Image size can not exceed 2MB"),!1):(this.$message.error("Only upload jpg / png files"),!1)},sendCode:function(){function e(){var t=setTimeout(function(){0==a?(s.sendCodeText="Send code",clearTimeout(t)):(s.sendCodeText=a+"s",a--,e())},1e3)}var t=this;if(!/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/.test(this.ruleForm.email))return this.$message.error("Please input the correct email"),!1;var a=120,s=this;w.get("/auth/checkMail.do",{params:{email:this.ruleForm.email,userType:2},showLoading:!1}).then(function(a){a.data.booleanResult?t.$message.error("E-mail has been registered"):(e(),w.get("/auth/authMail.do",{params:{email:t.ruleForm.email},loadingContainer:".send_code_btn"}).then(function(e){console.log(e)}))})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){return e?t.imageUrl?void t.getLocation():(t.$message.error("Please upload the photo"),!1):(console.log("error submit!!"),!1)})},nextPage:function(){this.submitForm("ruleForm"),console.log(this.ruleForm)},getLocation:function(){for(var e=this,t=this.stateList.length,a=void 0,s=0;s<t;s++)this.ruleForm.state===this.stateList[s].id&&(a=this.stateList[s].name);var r=window.location.hostname;w.get("https://maps.google.cn/maps/api/geocode/json",{params:{address:this.ruleForm.address1+"+"+this.ruleForm.address2+"+"+this.ruleForm.city+"+"+a,key:"merchant.ecard.life"==r?"AIzaSyCDwmMrC-NWMMgGlydCBzF7rKB2GeFUTaU":"AIzaSyCWwxc_LHWy2n_gCbKHw4Ky7st5J_ssfXg"},withCredentials:!1}).then(function(t){if("OK"===t.status){var a=t.results[0];console.log(a.geometry.location),e.ruleForm.location.lng=a.geometry.location.lng,e.ruleForm.location.lat=a.geometry.location.lat,e.curPage++}else{if("ZERO_RESULTS"===t.status)return e.$message.error("The corporate address does not exist, please revise and submit again."),!1;e.$message.error(t.status)}})},submit:function(){var e=this;if(!this.hour1.startTime||!this.hour1.endTime)return this.$message.error("Please select business hour"),!1;for(var t=this.stateList.length,a=void 0,s=0;s<t;s++)this.ruleForm.state===this.stateList[s].id&&(a=this.stateList[s].name);var r={address1:this.ruleForm.address1,address2:this.ruleForm.address2,avatarUrl:this.imageUrl,cardType:parseInt(this.card_type),city:this.ruleForm.city,companyCNName:this.ruleForm.cnName,companyENName:this.ruleForm.enName,companyType:parseInt(this.ruleForm.company_type),email:this.ruleForm.email,mailCode:this.ruleForm.msgCode,extraRate:parseFloat(this.ruleForm.cashBack),firstName:this.ruleForm.firstName,lastName:this.ruleForm.lastName,middleName:this.ruleForm.midName,invitationCode:this.ruleForm.inviteCode,lng:this.ruleForm.location.lng?parseFloat(this.ruleForm.location.lng):this.ruleForm.location.lng,lat:this.ruleForm.location.lat?parseFloat(this.ruleForm.location.lat):this.ruleForm.location.lat,licenceUrl:this.picUrl,needEmailRemind:this.notifier?1:0,password:P()(this.ruleForm.password).toLowerCase(),paySecret:P()(this.ruleForm.paySecret).toLowerCase(),phone:this.ruleForm.telPhone,province:a,provinceId:parseInt(this.ruleForm.state),type:2,zipCode:this.ruleForm.zipCode,officeHours:{am:this.hour1.startTime,dayFrom:this.week1_value,dayTo:this.week2_value,pm:this.hour1.endTime},optionalOfficeHours1:{am:this.hour2.startTime,dayFrom:parseInt(this.week3_value),dayTo:parseInt(this.week4_value),pm:this.hour2.endTime},optionalOfficeHours2:{am:this.hour3.startTime,dayFrom:parseInt(this.week5_value),dayTo:parseInt(this.week6_value),pm:this.hour3.endTime}};w.post("/merchantAuth/merchantRegister.do",r).then(function(t){200==t.code?e.$alert("Registration success!","Prompt",{confirmButtonText:"Confirm",type:"success",callback:function(e){window.location.reload()}}):403==t.code?e.$alert("E-mail has been registered!","Prompt",{confirmButtonText:"Confirm",type:"error"}):404==t.code?e.$alert("Incorrect email verification code!","Prompt",{confirmButtonText:"Confirm",type:"error"}):e.$message.error(t.msg)},function(){})}}}),R={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"register"},[s("login-nav"),e._v(" "),s("div",{staticClass:"register_form"},[s("h3",[e._v("Register")]),e._v(" "),s("el-form",{ref:"ruleForm",staticClass:"form_container demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[s("transition",{attrs:{name:"page_switch"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.curPage,expression:"curPage == 1"}],staticClass:"page1 page_content"},[s("div",{staticClass:"avatar_tips"},[e._v("\n\t\t\t\t\t\tPhoto will be displayed on client-side"),s("br"),e._v("Click here to upload photo as merchant profile picture\n\t\t\t\t\t")]),e._v(" "),s("el-upload",{staticClass:"avatar-uploader",attrs:{"auto-upload":!0,action:e.baseUrl+"/file/avatar/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"on-error":e.handleImgFail,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?s("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),s("el-form-item",{attrs:{"label-width":"220px",label:"Email",prop:"email"}},[s("div",{staticClass:"email"},[s("el-input",{model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}}),e._v(" "),s("el-button",{staticClass:"send_code_btn",attrs:{disabled:"Send code"!==e.sendCodeText,type:"primary"},on:{click:e.sendCode}},[e._v(e._s(e.sendCodeText))])],1)]),e._v(" "),s("el-form-item",{attrs:{"label-width":"220px",label:"Enter code",prop:"msgCode"}},[s("el-input",{model:{value:e.ruleForm.msgCode,callback:function(t){e.$set(e.ruleForm,"msgCode",t)},expression:"ruleForm.msgCode"}})],1),e._v(" "),s("el-form-item",{staticClass:"wrap_input",attrs:{"label-width":"220px",label:"Industry type",prop:"company_type"}},[s("el-select",{attrs:{placeholder:"Please select industry type"},model:{value:e.ruleForm.company_type,callback:function(t){e.$set(e.ruleForm,"company_type",t)},expression:"ruleForm.company_type"}},e._l(e.companyTypeList,function(e,t){return s("el-option",{key:t,attrs:{label:e.cateName,value:e.id}})}))],1),e._v(" "),s("el-form-item",{attrs:{"label-width":"220px",label:"Company name (English)",prop:"enName"}},[s("el-input",{model:{value:e.ruleForm.enName,callback:function(t){e.$set(e.ruleForm,"enName",t)},expression:"ruleForm.enName"}})],1),e._v(" "),s("el-form-item",{attrs:{"label-width":"220px",label:"Company name (Chinese)",prop:"cnName"}},[s("el-input",{model:{value:e.ruleForm.cnName,callback:function(t){e.$set(e.ruleForm,"cnName",t)},expression:"ruleForm.cnName"}})],1),e._v(" "),s("el-form-item",{staticClass:"sm_line_height",attrs:{"label-width":"220px",label:"Last name  (Owner/founder's info)",prop:"lastName"}},[s("el-input",{model:{value:e.ruleForm.lastName,callback:function(t){e.$set(e.ruleForm,"lastName",t)},expression:"ruleForm.lastName"}})],1),e._v(" "),s("el-form-item",{staticClass:"sm_line_height",attrs:{"label-width":"220px",label:"First name  (Owner/founder's info)",prop:"firstName"}},[s("el-input",{model:{value:e.ruleForm.firstName,callback:function(t){e.$set(e.ruleForm,"firstName",t)},expression:"ruleForm.firstName"}})],1),e._v(" "),s("el-form-item",{staticClass:"sm_line_height",attrs:{"label-width":"220px",label:"Middle name  (Owner/founder's info)",prop:"midName"}},[s("el-input",{model:{value:e.ruleForm.midName,callback:function(t){e.$set(e.ruleForm,"midName",t)},expression:"ruleForm.midName"}})],1),e._v(" "),s("el-form-item",{attrs:{"label-width":"220px",label:"Contact number",prop:"telPhone"}},[s("el-input",{model:{value:e.ruleForm.telPhone,callback:function(t){e.$set(e.ruleForm,"telPhone",t)},expression:"ruleForm.telPhone"}})],1),e._v(" "),s("el-form-item",{attrs:{"label-width":"220px",label:"Password",prop:"password"}},[s("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),s("el-form-item",{staticClass:"paySecret sm_line_height",attrs:{"label-width":"220px",label:"Enter 6 digital password, will be used when transfer funds back to bank account, and load funds.",prop:"paySecret"}},[s("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm.paySecret,callback:function(t){e.$set(e.ruleForm,"paySecret",t)},expression:"ruleForm.paySecret"}})],1),e._v(" "),s("el-form-item",{staticClass:"sm_line_height",attrs:{"label-width":"220px",label:"Address line 1* (corporate address)",prop:"address1"}},[s("el-input",{model:{value:e.ruleForm.address1,callback:function(t){e.$set(e.ruleForm,"address1",t)},expression:"ruleForm.address1"}})],1),e._v(" "),s("el-form-item",{attrs:{"label-width":"220px",label:"Address line 2",prop:"address2"}},[s("el-input",{model:{value:e.ruleForm.address2,callback:function(t){e.$set(e.ruleForm,"address2",t)},expression:"ruleForm.address2"}})],1),e._v(" "),s("el-form-item",{attrs:{"label-width":"220px",label:"City",prop:"city"}},[s("el-input",{model:{value:e.ruleForm.city,callback:function(t){e.$set(e.ruleForm,"city",t)},expression:"ruleForm.city"}})],1),e._v(" "),s("el-form-item",{staticClass:"state",attrs:{"label-width":"220px",label:"State / province",prop:"state"}},[s("el-select",{attrs:{placeholder:"Please select state / province"},model:{value:e.ruleForm.state,callback:function(t){e.$set(e.ruleForm,"state",t)},expression:"ruleForm.state"}},e._l(e.stateList,function(e,t){return s("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),s("el-form-item",{attrs:{"label-width":"220px",label:"Zip code",prop:"zipCode"}},[s("el-input",{model:{value:e.ruleForm.zipCode,callback:function(t){e.$set(e.ruleForm,"zipCode",t)},expression:"ruleForm.zipCode"}})],1),e._v(" "),s("el-form-item",{attrs:{"label-width":"220px",label:"Invitation code",prop:"inviteCode"}},[s("el-input",{model:{value:e.ruleForm.inviteCode,callback:function(t){e.$set(e.ruleForm,"inviteCode",t)},expression:"ruleForm.inviteCode"}})],1),e._v(" "),s("el-form-item",{staticClass:"cashBack sm_line_height",attrs:{"label-width":"220px",label:"Cashback percentage(at least 10%)",prop:"cashBack"}},[s("el-input",{attrs:{type:"number"},model:{value:e.ruleForm.cashBack,callback:function(t){e.$set(e.ruleForm,"cashBack",t)},expression:"ruleForm.cashBack"}}),e._v(" \n\t\t\t\t\t\t%\n\t\t\t\t\t")],1),e._v(" "),s("div",{staticClass:"upload_drag"},[s("p",[e._v("Upload business license")]),e._v(" "),s("el-upload",{attrs:{"show-file-list":!1,"on-success":e.handlePicSuccess,"before-upload":e.beforePicUpload,"on-error":e.handleImgFail,action:e.baseUrl+"/file/licence/upload.do"}},[s("i",{staticClass:"el-icon-upload"}),e._v(" "),s("div",{staticClass:"el-upload__text"},[e._v("Click here to upload\n\t\t\t\t\t\t\t")]),e._v(" "),e.picUrl?s("img",{staticClass:"picUrl",attrs:{src:e.picUrl}}):e._e(),e._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("Only upload jpg / png files, and not more than 2Mb")])])],1),e._v(" "),s("div",{staticClass:"page_btn"},[3!=e.curPage?s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.nextPage()}}},[e._v("下一步")]):e._e()],1)],1)]),e._v(" "),s("transition",{attrs:{name:"page_switch"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:2==e.curPage,expression:"curPage == 2"}],staticClass:"page2 page_content"},[s("div",{staticClass:"business_hours"},[s("p",{staticClass:"business_hours_title"},[e._v("Business hour")]),e._v(" "),s("div",{staticClass:"business_select"},[s("span",{staticClass:"is_require Required"},[e._v("Required")]),e._v(" "),s("div",[s("div",{staticClass:"week_select"},[s("el-select",{attrs:{placeholder:"Please select"},model:{value:e.week1_value,callback:function(t){e.week1_value=t},expression:"week1_value"}},e._l(e.week1,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),s("span",{staticClass:"till"},[e._v("Till")]),e._v(" "),s("el-select",{attrs:{placeholder:"Please select"},model:{value:e.week2_value,callback:function(t){e.week2_value=t},expression:"week2_value"}},e._l(e.week2,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),s("el-time-select",{attrs:{id:"hour1_startTime",placeholder:"startTime","picker-options":{start:"00:00",step:"00:30",end:"24:00",maxTime:e.hour1.endTime}},model:{value:e.hour1.startTime,callback:function(t){e.$set(e.hour1,"startTime",t)},expression:"hour1.startTime"}}),e._v(" "),s("span",{staticClass:"till"},[e._v("Till")]),e._v(" "),s("el-time-select",{attrs:{id:"hour1_endTime",placeholder:"endTime","picker-options":{start:"00:00",step:"00:30",end:"24:00",minTime:e.hour1.startTime}},model:{value:e.hour1.endTime,callback:function(t){e.$set(e.hour1,"endTime",t)},expression:"hour1.endTime"}})],1)]),e._v(" "),s("i",{staticClass:"line"}),e._v(" "),s("div",{staticClass:"business_select"},[s("span",{staticClass:"is_require"},[e._v("Optional 1")]),e._v(" "),s("div",[s("div",{staticClass:"week_select"},[s("el-select",{attrs:{clearable:"",placeholder:"Please select"},model:{value:e.week3_value,callback:function(t){e.week3_value=t},expression:"week3_value"}},e._l(e.week3,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),s("span",{staticClass:"till"},[e._v("Till")]),e._v(" "),s("el-select",{attrs:{clearable:"",placeholder:"Please select"},model:{value:e.week4_value,callback:function(t){e.week4_value=t},expression:"week4_value"}},e._l(e.week4,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),s("el-time-select",{attrs:{id:"hour2_startTime",placeholder:"startTime","picker-options":{start:"00:00",step:"00:30",end:"24:00",maxTime:e.hour2.endTime}},model:{value:e.hour2.startTime,callback:function(t){e.$set(e.hour2,"startTime",t)},expression:"hour2.startTime"}}),e._v(" "),s("span",{staticClass:"till"},[e._v("Till")]),e._v(" "),s("el-time-select",{attrs:{id:"hour2_endTime",placeholder:"endTime","picker-options":{start:"00:00",step:"00:30",end:"24:00",minTime:e.hour2.startTime}},model:{value:e.hour2.endTime,callback:function(t){e.$set(e.hour2,"endTime",t)},expression:"hour2.endTime"}})],1)]),e._v(" "),s("div",{staticClass:"business_select"},[s("span",{staticClass:"is_require"},[e._v("Optional 2")]),e._v(" "),s("div",[s("div",{staticClass:"week_select"},[s("el-select",{attrs:{clearable:"",placeholder:"Please select"},model:{value:e.week5_value,callback:function(t){e.week5_value=t},expression:"week5_value"}},e._l(e.week5,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),s("span",{staticClass:"till"},[e._v("Till")]),e._v(" "),s("el-select",{attrs:{clearable:"",placeholder:"Please select"},model:{value:e.week6_value,callback:function(t){e.week6_value=t},expression:"week6_value"}},e._l(e.week6,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),s("el-time-select",{attrs:{id:"hour3_startTime",placeholder:"startTime","picker-options":{start:"00:00",step:"00:30",end:"24:00",maxTime:e.hour3.endTime}},model:{value:e.hour3.startTime,callback:function(t){e.$set(e.hour3,"startTime",t)},expression:"hour3.startTime"}}),e._v(" "),s("span",{staticClass:"till"},[e._v("Till")]),e._v(" "),s("el-time-select",{attrs:{id:"hour3_endTime",placeholder:"endTime","picker-options":{start:"00:00",step:"00:30",end:"24:00",minTime:e.hour3.startTime}},model:{value:e.hour3.endTime,callback:function(t){e.$set(e.hour3,"endTime",t)},expression:"hour3.endTime"}})],1)])]),e._v(" "),s("div",{staticClass:"card_type"},[s("p",{staticClass:"business_hours_title"},[e._v("Choose virtual ECARD")]),e._v(" "),s("div",{staticClass:"card_container"},[s("el-radio",{attrs:{label:"1"},model:{value:e.card_type,callback:function(t){e.card_type=t},expression:"card_type"}},[s("img",{attrs:{src:a("rxMy"),alt:""}})]),e._v(" "),s("el-radio",{attrs:{label:"2"},model:{value:e.card_type,callback:function(t){e.card_type=t},expression:"card_type"}},[s("img",{attrs:{src:a("dHxb"),alt:""}})])],1),e._v(" "),s("el-checkbox",{staticClass:"notifier",model:{value:e.notifier,callback:function(t){e.notifier=t},expression:"notifier"}},[s("p",[e._v("Send me Email")]),e._v(" "),s("span",[e._v("When received or transferred money")])]),s("i"),e._v(" "),s("el-checkbox",{staticClass:"notifier",model:{value:e.agreement,callback:function(t){e.agreement=t},expression:"agreement"}},[s("p",[e._v("I agree to the Terms and Privacy")]),e._v(" "),s("span",[e._v("After click this button, I agree to the ECARD terms and conditions")])])],1),e._v(" "),s("div",{staticClass:"page_btn"},[1!=e.curPage?s("el-button",{on:{click:function(t){e.curPage--}}},[e._v("Prev")]):e._e(),e._v(" "),s("el-button",{attrs:{type:"primary",disabled:!e.agreement},on:{click:function(t){e.submit()}}},[e._v("Register")])],1)])])],1)],1)],1)},staticRenderFns:[]},L=a("8AGX")(A,R,!1,function(e){a("8MWK")},null,null).exports,E={data:function(){return{sendCodeText:"Send code",resetForm:{email:"",password:"",code:""},rules:{email:[{required:!0,validator:function(e,t,a){if(""===t||void 0==t)return a(new Error("Please enter email")),!1;/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/.test(t)?a():a(new Error("Please input the correct email"))},trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"Please enter password"}],code:[{required:!0,trigger:"blur",message:"Please enter code"}]}}},components:{loginNav:F.default},methods:{sendCode:function(){function e(){var s=setTimeout(function(){0==t?(a.sendCodeText="Send code",clearTimeout(s)):(a.sendCodeText=t+"s",t--,e())},1e3)}if(!/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/.test(this.resetForm.email))return this.$message.error("Please input the correct email"),!1;var t=120,a=this;e(),w.get("/auth/authMail.do",{params:{email:this.resetForm.email},loadingContainer:".send_code_btn"}).then(function(e){console.log(e)})},submit:function(){var e=this;this.$refs.resetForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;w({method:"post",url:"/merchantAuth/merchantResetPasswordByEmailWithCode.do",headers:{"Content-type":"multipart/form-data"},params:{email:e.resetForm.email,code:e.resetForm.code,newPassword:P()(e.resetForm.password).toLowerCase()}}).then(function(t){200==t.code?e.$router.push("/login"):e.$message.error(t.msg)})})},reset:function(){w.post()}}},U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reset"},[a("login-nav"),e._v(" "),a("el-form",{ref:"resetForm",staticClass:"login_form",attrs:{model:e.resetForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{"label-width":"0",prop:"email"}},[a("el-input",{attrs:{placeholder:"Email",clearable:""},model:{value:e.resetForm.email,callback:function(t){e.$set(e.resetForm,"email",t)},expression:"resetForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"code"}},[a("el-input",{staticClass:"forget_password",attrs:{type:"password",placeholder:"Code",clearable:""},model:{value:e.resetForm.code,callback:function(t){e.$set(e.resetForm,"code",t)},expression:"resetForm.code"}},[a("template",{slot:"append"},[a("el-button",{staticClass:"send_code_btn",attrs:{size:"medium",disabled:"Send code"!==e.sendCodeText,type:"primary"},on:{click:e.sendCode}},[e._v(e._s(e.sendCodeText))])],1)],2)],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"password"}},[a("el-input",{staticClass:"forget_password",attrs:{type:"password",placeholder:"New password",clearable:""},model:{value:e.resetForm.password,callback:function(t){e.$set(e.resetForm,"password",t)},expression:"resetForm.password"}})],1),e._v(" "),a("div",{staticClass:"to_register"}),e._v(" "),a("el-button",{staticClass:"login_btn",attrs:{type:"primary"},on:{click:e.submit}},[e._v("重置密码")])],1)],1)},staticRenderFns:[]},O=a("8AGX")(E,U,!1,function(e){a("kpjI")},null,null).exports,I={data:function(){return{showMenu:!1}},computed:{avatar:function(){return this.$store.state.user_account.avatarUrl}},mounted:function(){},methods:{loginOut:function(){var e=this;this.$confirm("确定要退出吗?","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){w.get("/userOperation/logout.do",{session:!0}).then(function(t){200==t.code?(_.a.remove("user_info",{path:""}),e.$router.go(0)):e.$message.error(t.msg)})}).catch(function(){console.log("cancel")})}}},q={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("header",{staticClass:"header"},[s("img",{staticClass:"logo",attrs:{src:a("iQH9"),alt:""}}),e._v(" "),s("div",{staticClass:"nav_btn"},[s("router-link",{staticClass:"nav_link",attrs:{to:"/index"}},[e._v("Home page"),s("span")]),e._v(" "),s("router-link",{staticClass:"nav_link",attrs:{to:"/remind"}},[e._v("提醒"),s("span")]),e._v(" "),s("div",{staticClass:"nav_link avatar",attrs:{href:"#"},on:{mouseover:function(t){e.showMenu=!e.showMenu},mouseout:function(t){e.showMenu=!e.showMenu}}},[s("img",{staticClass:"avatar_pic",attrs:{src:e.avatar,alt:""}}),e._v(" "),s("transition",{attrs:{name:"menu"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showMenu,expression:"showMenu"}],staticClass:"menu"},[s("ul",[s("li",[s("router-link",{attrs:{to:"/account"}},[e._v("银行账号管理")])],1),e._v(" "),s("li",[s("router-link",{attrs:{to:"/personal"}},[e._v("个人信息与设置")])],1),e._v(" "),s("li",[s("router-link",{attrs:{to:"/help"}},[e._v("帮助")])],1),e._v(" "),s("li",[s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){e.loginOut()}}},[e._v("退出")])])])])])],1)],1)])},staticRenderFns:[]},z=a("8AGX")(I,q,!1,function(e){a("6IGF")},null,null).exports,B={components:{commonHeader:z},data:function(){return{activeName:"second"}},mounted:function(){},methods:{handleClick:function(e,t){console.log(e,t)}}},M={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("common-header"),e._v(" "),a("div",{staticClass:"index"},[a("h1",[e._v("余额管理")]),e._v(" "),a("div",{staticClass:"balance"},[a("p",[e._v("账户余额: $200.00")]),e._v(" "),a("el-button",{staticClass:"withdraw_btn",attrs:{type:"primary"}},[e._v("提现")])],1),e._v(" "),a("h1",{staticClass:"details_title"},[e._v("\n\t\t\t账目明细 \n\t\t\t"),a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("发送账目明细到我的Email")])],1),e._v(" "),a("el-tabs",{staticClass:"index_tab",attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"顾客",name:"first"}},[e._v("顾客")]),e._v(" "),a("el-tab-pane",{attrs:{label:"我的",name:"second"}},[e._v("我的")])],1)],1)],1)},staticRenderFns:[]},D=a("8AGX")(B,M,!1,function(e){a("nqwc")},null,null).exports,Z={props:{value:{type:Boolean,default:!1}},data:function(){return{checked:!1}}},H={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:["setting_button",this.value?"active":""]},[t("span",{staticClass:"point"})])},staticRenderFns:[]},V={props:["visible","stateList","formContent"],data:function(){return{dialogFormVisible:this.visible,weekList:[{label:"MON",value:1},{label:"TUE",value:2},{label:"WEN",value:3},{label:"THU",value:4},{label:"FRI",value:5},{label:"SAT",value:6},{label:"SUN",value:7}],address:this.formContent||{optional1:{openFromDay:1,openFromTime:"00:00",openToDay:5,openToTime:"23:00"},optional2:{openFromDay:null,openFromTime:null,openToDay:null,openToTime:null},optional3:{openFromDay:null,openFromTime:null,openToDay:null,openToTime:null},userStoreProfile:{address1:"",address2:"",cityName:"",stateId:null,stateName:"",briefAddress:"",cnName:"",contact:"",enName:"",fullAddress:"",lat:null,lng:null,zipCode:"",storeId:null}}}},mounted:function(){console.log(this.formContent)},watch:{visible:function(e){this.dialogFormVisible=e},dialogFormVisible:function(e){this.$emit("update:visible",e)}},methods:{cancel:function(){this.$emit(this.$emit("update:visible",!1))},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},validate:function(e){var t=this;this.$refs[e].validate(function(e){return e?t.checkBussinessHours(t.address.optional2)&&t.checkBussinessHours(t.address.optional3)?void t.getLocation():(t.$message.error("请选择完整的营业时间"),!1):(console.log("error submit!!"),!1)})},checkBussinessHours:function(e){var t=[];for(var a in e)t.push(e[a]);return t.every(function(e){return null==e||""==e})||t.every(function(e){return""!=e&&null!=e})},getLocation:function(){for(var e=this,t=this.stateList.length,a=void 0,s=0;s<t;s++)this.address.userStoreProfile.stateId===this.stateList[s].id&&(a=this.stateList[s].name);var r=window.location.hostname;w.get("https://maps.google.cn/maps/api/geocode/json",{params:{address:this.address.userStoreProfile.address1+"+"+this.address.userStoreProfile.address2+"+"+this.address.userStoreProfile.cityName+"+"+a,key:"merchant.ecard.life"==r?"AIzaSyCDwmMrC-NWMMgGlydCBzF7rKB2GeFUTaU":"AIzaSyCWwxc_LHWy2n_gCbKHw4Ky7st5J_ssfXg"},withCredentials:!1}).then(function(t){if("OK"===t.status){var s=t.results[0];console.log(s.geometry.location),e.address.userStoreProfile.lng=s.geometry.location.lng,e.address.userStoreProfile.lat=s.geometry.location.lat,e.submitForm(a)}else{if("ZERO_RESULTS"===t.status)return e.$message.error("The corporate address does not exist, please revise and submit again."),!1;e.$message.error(t.status)}})},submitForm:function(e){var t=this;w.post("/merchantOperation/saveMerchantStore.do",{address1:this.address.userStoreProfile.address1,address2:this.address.userStoreProfile.address2,cityName:this.address.userStoreProfile.cityName,contact:this.address.userStoreProfile.contact,lat:parseFloat(this.address.userStoreProfile.lat),lng:parseFloat(this.address.userStoreProfile.lng),open1FromDay:this.address.optional1.openFromDay,open1FromTime:this.address.optional1.openFromTime,open1ToDay:this.address.optional1.openToDay,open1ToTime:this.address.optional1.openToTime,open2FromDay:this.address.optional2.openFromDay,open2FromTime:this.address.optional2.openFromTime,open2ToDay:this.address.optional2.openToDay,open2ToTime:this.address.optional2.openToTime,open3FromDay:this.address.optional3.openFromDay,open3FromTime:this.address.optional3.openFromTime,open3ToDay:this.address.optional3.openToDay,open3ToTime:this.address.optional3.openToTime,stateId:this.address.userStoreProfile.stateId,stateName:e,storeId:this.address.userStoreProfile.id,updateType:this.formContent?0:1,userId:this.$store.state.user_info.userId,zipCode:this.address.userStoreProfile.zipCode},{session:!0}).then(function(e){200==e.code||t.$message.error(e.msg)})}}},W={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"editForm"},[a("el-dialog",{attrs:{title:this.formContent?"编辑地址信息":"新增地址信息",visible:e.dialogFormVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"address",staticClass:"form_container",attrs:{model:e.address,"label-width":"100px"}},[a("el-form-item",{attrs:{prop:"userStoreProfile.address1",label:"地址栏1",rules:[{required:!0,message:"请输入商家地址栏1",trigger:"blur"}]}},[a("el-input",{model:{value:e.address.userStoreProfile.address1,callback:function(t){e.$set(e.address.userStoreProfile,"address1",t)},expression:"address.userStoreProfile.address1"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"userStoreProfile.address2",label:"地址栏2"}},[a("el-input",{model:{value:e.address.userStoreProfile.address2,callback:function(t){e.$set(e.address.userStoreProfile,"address2",t)},expression:"address.userStoreProfile.address2"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"userStoreProfile.cityName",label:"市",rules:[{required:!0,message:"请输入市",trigger:"blur"}]}},[a("el-input",{model:{value:e.address.userStoreProfile.cityName,callback:function(t){e.$set(e.address.userStoreProfile,"cityName",t)},expression:"address.userStoreProfile.cityName"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"userStoreProfile.stateId",label:"省",rules:[{required:!0,message:"请输入省",trigger:"blur"}]}},[a("el-select",{attrs:{placeholder:"Please select state / province"},model:{value:e.address.userStoreProfile.stateId,callback:function(t){e.$set(e.address.userStoreProfile,"stateId",t)},expression:"address.userStoreProfile.stateId"}},e._l(e.stateList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{prop:"userStoreProfile.zipCode",label:"邮编",rules:[{required:!0,message:"请输入邮编",trigger:"blur"}]}},[a("el-input",{model:{value:e.address.userStoreProfile.zipCode,callback:function(t){e.$set(e.address.userStoreProfile,"zipCode",t)},expression:"address.userStoreProfile.zipCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"userStoreProfile.contact",rules:{required:!0,message:"电话不能为空",trigger:"blur"}}},[a("el-input",{model:{value:e.address.userStoreProfile.contact,callback:function(t){e.$set(e.address.userStoreProfile,"contact",t)},expression:"address.userStoreProfile.contact"}})],1),e._v(" "),a("div",{staticClass:"business_select form_block"},[a("span",{staticClass:"is_require Required"},[e._v("Required")]),e._v(" "),a("div",[a("div",{staticClass:"week_select"},[a("el-select",{attrs:{clearable:!1,placeholder:"Please select"},model:{value:e.address.optional1.openFromDay,callback:function(t){e.$set(e.address.optional1,"openFromDay",t)},expression:"address.optional1.openFromDay"}},e._l(e.weekList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("span",{staticClass:"till"},[e._v("Till")]),e._v(" "),a("el-select",{attrs:{clearable:!1,placeholder:"Please select"},model:{value:e.address.optional1.openToDay,callback:function(t){e.$set(e.address.optional1,"openToDay",t)},expression:"address.optional1.openToDay"}},e._l(e.weekList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-time-select",{attrs:{clearable:!1,id:"open1FromTime",placeholder:"startTime","picker-options":{start:"00:00",step:"00:30",end:"24:00",maxTime:e.address.optional1.openToTime}},model:{value:e.address.optional1.openFromTime,callback:function(t){e.$set(e.address.optional1,"openFromTime",t)},expression:"address.optional1.openFromTime"}}),e._v(" "),a("span",{staticClass:"till"},[e._v("Till")]),e._v(" "),a("el-time-select",{attrs:{clearable:!1,id:"open1ToTime",placeholder:"endTime","picker-options":{start:"00:00",step:"00:30",end:"24:00",minTime:e.address.optional1.openFromTime}},model:{value:e.address.optional1.openToTime,callback:function(t){e.$set(e.address.optional1,"openToTime",t)},expression:"address.optional1.openToTime"}})],1)]),e._v(" "),a("div",{staticClass:"business_select form_block"},[a("span",{staticClass:"is_require"},[e._v("Optional 1")]),e._v(" "),a("div",[a("div",{staticClass:"week_select"},[a("el-select",{attrs:{clearable:!0,placeholder:"Please select"},model:{value:e.address.optional2.openFromDay,callback:function(t){e.$set(e.address.optional2,"openFromDay",t)},expression:"address.optional2.openFromDay"}},e._l(e.weekList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("span",{staticClass:"till"},[e._v("Till")]),e._v(" "),a("el-select",{attrs:{clearable:!0,placeholder:"Please select"},model:{value:e.address.optional2.openToDay,callback:function(t){e.$set(e.address.optional2,"openToDay",t)},expression:"address.optional2.openToDay"}},e._l(e.weekList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-time-select",{attrs:{clearable:!0,id:"open2FromTime",placeholder:"startTime","picker-options":{start:"00:00",step:"00:30",end:"24:00",maxTime:e.address.optional2.openToTime}},model:{value:e.address.optional2.openFromTime,callback:function(t){e.$set(e.address.optional2,"openFromTime",t)},expression:"address.optional2.openFromTime"}}),e._v(" "),a("span",{staticClass:"till"},[e._v("Till")]),e._v(" "),a("el-time-select",{attrs:{clearable:!0,id:"open2ToTime",placeholder:"endTime","picker-options":{start:"00:00",step:"00:30",end:"24:00",minTime:e.address.optional2.openFromTime}},model:{value:e.address.optional2.openToTime,callback:function(t){e.$set(e.address.optional2,"openToTime",t)},expression:"address.optional2.openToTime"}})],1)]),e._v(" "),a("div",{staticClass:"business_select form_block"},[a("span",{staticClass:"is_require"},[e._v("Optional 2")]),e._v(" "),a("div",[a("div",{staticClass:"week_select"},[a("el-select",{attrs:{clearable:!0,placeholder:"Please select"},model:{value:e.address.optional3.openFromDay,callback:function(t){e.$set(e.address.optional3,"openFromDay",t)},expression:"address.optional3.openFromDay"}},e._l(e.weekList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("span",{staticClass:"till"},[e._v("Till")]),e._v(" "),a("el-select",{attrs:{clearable:!0,placeholder:"Please select"},model:{value:e.address.optional3.openToDay,callback:function(t){e.$set(e.address.optional3,"openToDay",t)},expression:"address.optional3.openToDay"}},e._l(e.weekList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-time-select",{attrs:{clearable:!0,id:"open3FromTime",placeholder:"startTime","picker-options":{start:"00:00",step:"00:30",end:"24:00",maxTime:e.address.optional3.openToTime}},model:{value:e.address.optional3.openFromTime,callback:function(t){e.$set(e.address.optional3,"openFromTime",t)},expression:"address.optional3.openFromTime"}}),e._v(" "),a("span",{staticClass:"till"},[e._v("Till")]),e._v(" "),a("el-time-select",{attrs:{clearable:!0,id:"open3ToTime",placeholder:"endTime","picker-options":{start:"00:00",step:"00:30",end:"24:00",minTime:e.address.optional3.openFromTime}},model:{value:e.address.optional3.openToTime,callback:function(t){e.$set(e.address.optional3,"openToTime",t)},expression:"address.optional3.openToTime"}})],1)])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.validate("address")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},j={filters:{weekFilters:function(e){var t=void 0;switch(e){case 1:t="Monday";break;case 2:t="TuesDay";break;case 3:t="Wednesday";break;case 4:t="Thursday";break;case 5:t="Friday";break;case 6:t="Saturday";break;case 7:t="Sunday"}return t}},data:function(){return{addressInfo:[],newAvatar:"",baseUrl:"localhost"==window.location.hostname||"merchant.ecard"==window.location.hostname?"http://api.ecard":"https://api.ecard.life",isRemember:_.a.getJSON("login").isRemember,isPassword:!0,payRemind:!0,rechargeRemind:!0,withdrawRemind:!0,cashbackRemind:!0,showEditForm:!1,stateList:[],formContent:{}}},computed:{oldAvatar:function(){return this.$store.state.user_account.avatarUrl}},watch:{newAvatar:function(){}},components:{commonHeader:z,settingButton:a("8AGX")(Z,H,!1,function(e){a("sQ53")},null,null).exports,editForm:a("8AGX")(V,W,!1,function(e){a("ZD2v")},null,null).exports},mounted:function(){var e=this;this.getAddressInfo(),this.getUserSetting(),w.get("/info/state/list.do",{params:{stateName:""},showLoading:!1}).then(function(t){console.log(t),e.stateList=t.data})},methods:{comfirmUpload:function(){var e=this,t=new FormData;t.append("avatarUrl",this.newAvatar),w.post("/userOperation/updateUserAvatarUrl.do",t,{session:!0}).then(function(t){200==t.code?(e.$store.dispatch("setAvatar",e.newAvatar),e.$message.success("修改头像成功"),e.newAvatar=""):e.$message.error(t.msg)})},cancelUpload:function(){this.newAvatar=""},handleAvatarSuccess:function(e,t){console.log(e),this.newAvatar=e.data.imageUrl,this.uploadLoading.close()},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type,s=e.size/1024/1024<2;return t||a?s?(this.uploadLoading=this.$loading({target:document.querySelector(".avatar-uploader .el-upload")}),(a||t)&&s):(this.$message.error("Image size can not exceed 2MB"),!1):(this.$message.error("Only upload jpg / png files"),!1)},handleImgFail:function(e,t,a){this.$message.error(e),this.uploadLoading.close()},showFormPop:function(e){var t=this;this.formContent=void 0!=e?this.addressInfo[e]:"",this.$nextTick(function(){t.showEditForm=!0})},getAddressInfo:function(){var e=this;w.get("merchantOperation/queryMerchantStoreByUserId.do",{session:!0}).then(function(t){e.addressInfo=t.data.reverse()})},deleteAddressInfo:function(e){var t=this;this.$confirm("确定删除该地址信息吗?","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){t.addressInfo.splice(e,1)}).catch(function(){console.log("cancel")})},handleSubmit:function(e){console.log(e)},getUserSetting:function(){var e=this;w.get("/userOperation/getUserSetting.do",{session:!0,showLoading:!1}).then(function(t){console.log(t);var a=t.data;e.withdrawRemind=!!a.withdrawNotify,e.rechargeRemind=!!a.chargeNotify,e.payRemind=!!a.payNotify,e.cashbackRemind=!!a.cashbackNotify,e.isPassword=!!a.usePaySecret},function(){})},rememberLogin:function(){this.isRemember=!this.isRemember,this.$store.dispatch("rememberMe",this.isRemember)},passwordPop:function(){var e=this;this.$prompt("请输入密码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{6}$/,inputType:"password",inputErrorMessage:"请输入正确的6位数字密码"}).then(function(t){var a=t.value;w.post("/userOperation/updateUserSetting.do",{paySecret:P()(a).toLowerCase(),usePaySecret:e.isPassword?0:1},{session:!0}).then(function(t){200==t.code?e.isPassword=!e.isPassword:e.$message.error(t.msg)})}).catch(function(){})},passwordRequired:function(){this.isPassword?this.passwordPop():this.isPassword=!0},updateUserSetting:function(e){var t=this,a={};switch(e){case"payRemind":this.payRemind=!this.payRemind,a={payNotify:this.payRemind?1:0};break;case"rechargeRemind":this.rechargeRemind=!this.rechargeRemind,a={chargeNotify:this.rechargeRemind?1:0};break;case"withdrawRemind":this.withdrawRemind=!this.withdrawRemind,a={withdrawNotify:this.withdrawRemind?1:0};break;case"cashbackRemind":this.cashbackRemind=!this.cashbackRemind,a={cashbackNotify:this.cashbackRemind?1:0}}w.post("/userOperation/updateUserSetting.do",a,{session:!0,showLoading:!1}).then(function(e){200!=e.code&&t.$message.error(e.msg)})}}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("common-header"),e._v(" "),a("div",{staticClass:"personal"},[a("h1",[e._v("基本信息")]),e._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{"auto-upload":!0,action:e.baseUrl+"/file/avatar/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"on-error":e.handleImgFail,"before-upload":e.beforeAvatarUpload}},[e.newAvatar?a("img",{staticClass:"avatar",attrs:{src:e.newAvatar}}):a("img",{staticClass:"avatar",attrs:{src:e.oldAvatar}})]),e._v(" "),e.newAvatar?a("div",{staticClass:"upload_btn"},[a("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){e.comfirmUpload(t)}}},[e._v("确定上传")]),e._v(" "),a("el-button",{attrs:{size:"small"},nativeOn:{click:function(t){e.newAvatar=""}}},[e._v("取消")])],1):e._e(),e._v(" "),e._l(e.addressInfo,function(t,s){return a("section",{staticClass:"address_list"},[a("div",{staticClass:"address_title"},[a("h2",[e._v(e._s("地址信息"+(s+1)))]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.showFormPop(s)}}},[e._v("编辑")]),e._v(" "),0!=s?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){e.deleteAddressInfo(s)}}},[e._v("删除")]):e._e()],1),e._v(" "),a("ul",[a("li",{staticClass:"list_item"},[a("span",{staticClass:"item_title"},[e._v("地址:")]),e._v(" "),a("div",{staticClass:"item_content"},[e._v("\n\t\t\t\t\t\t"+e._s(t.userStoreProfile.fullAddress)+"\n\t\t\t\t\t")])]),e._v(" "),a("li",{staticClass:"list_item"},[a("span",{staticClass:"item_title"},[e._v("电话:")]),e._v(" "),a("div",{staticClass:"item_content"},[e._v("\n\t\t\t\t\t\t"+e._s(t.userStoreProfile.contact)+"\n\t\t\t\t\t")])]),e._v(" "),a("li",{staticClass:"list_item"},[a("span",{staticClass:"item_title"},[e._v("营业时间1:")]),e._v(" "),a("div",{staticClass:"item_content"},[a("ul",e._l(t.openDayList,function(t,s){return t?a("li",[a("span",{staticClass:"item_week"},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(e._f("weekFilters")(t.week))+"\n\t\t\t\t\t\t\t\t")]),e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.am+"am - "+t.pm+"pm")+"\n\t\t\t\t\t\t\t")]):e._e()}))])])])])}),e._v(" "),a("el-button",{staticClass:"add_address_btn",attrs:{type:"primary",size:"mini"},on:{click:function(t){e.showFormPop()}}},[e._v("新增地址信息")]),e._v(" "),a("h1",[e._v("安全隐私")]),e._v(" "),a("section",{staticClass:"setting_list"},[e._m(0),e._v(" "),a("div",{staticClass:"setting_btn"},[a("setting-button",{attrs:{value:e.isRemember},nativeOn:{click:function(t){e.rememberLogin(t)}}})],1)]),e._v(" "),a("section",{staticClass:"setting_list"},[e._m(1),e._v(" "),a("div",{staticClass:"setting_btn"},[a("setting-button",{nativeOn:{click:function(t){e.passwordPop(t)}},model:{value:e.isPassword,callback:function(t){e.isPassword=t},expression:"isPassword"}})],1)]),e._v(" "),a("h1",[e._v("提示设置")]),e._v(" "),a("section",{staticClass:"setting_list"},[e._m(2),e._v(" "),a("div",{staticClass:"setting_btn"},[a("setting-button",{nativeOn:{click:function(t){e.updateUserSetting("payRemind")}},model:{value:e.payRemind,callback:function(t){e.payRemind=t},expression:"payRemind"}})],1)]),e._v(" "),a("section",{staticClass:"setting_list"},[e._m(3),e._v(" "),a("div",{staticClass:"setting_btn"},[a("setting-button",{nativeOn:{click:function(t){e.updateUserSetting("rechargeRemind")}},model:{value:e.rechargeRemind,callback:function(t){e.rechargeRemind=t},expression:"rechargeRemind"}})],1)]),e._v(" "),a("section",{staticClass:"setting_list"},[e._m(4),e._v(" "),a("div",{staticClass:"setting_btn"},[a("setting-button",{nativeOn:{click:function(t){e.updateUserSetting("withdrawRemind")}},model:{value:e.withdrawRemind,callback:function(t){e.withdrawRemind=t},expression:"withdrawRemind"}})],1)]),e._v(" "),a("section",{staticClass:"setting_list"},[e._m(5),e._v(" "),a("div",{staticClass:"setting_btn"},[a("setting-button",{nativeOn:{click:function(t){e.updateUserSetting("cashbackRemind")}},model:{value:e.cashbackRemind,callback:function(t){e.cashbackRemind=t},expression:"cashbackRemind"}})],1)])],2),e._v(" "),e.showEditForm?a("edit-form",{attrs:{visible:e.showEditForm,stateList:e.stateList,formContent:e.formContent},on:{"update:visible":function(t){e.showEditForm=t},submitCallBack:e.handleSubmit}}):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h2",[this._v("记住我的账号")]),this._v(" "),t("p",[this._v("在登录前记住您的账号，这样对您比较方便")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h2",[this._v("设置6位数字密码")]),this._v(" "),t("p",[this._v("支付或提现超过$500前先输入数字密码，让您的资金更安全")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h2",[this._v("当您支付时发送提醒")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h2",[this._v("当您充值时发送提醒")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h2",[this._v("当您提现时发送提醒")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h2",[this._v("当现金返还时发送提醒")])])}]},J=a("8AGX")(j,G,!1,function(e){a("xgLZ")},null,null).exports,K={components:{commonHeader:z},data:function(){return{iavToken:"",dialogVisible:!1,accountList:[]}},mounted:function(){var e=this;window.addEventListener("message",function(t){"success"===t.data?(e.dialogVisible=!1,e.$message({message:"绑卡成功！",type:"success"}),e.getBankAccount()):"error"===t.data&&(e.dialogVisible=!1,e.$message.error("网络错误，请刷新重试"))}),this.getBankAccount()},methods:{getBankAccount:function(){var e=this;w.get("/userOperation/getUserFundingSource.do",{session:!0,loadingContainer:".account_list"}).then(function(t){var a=t.data;e.accountList=a})},getIavToken:function(){var e=this;w.get("/userOperation/getIAVToken",{session:!0}).then(function(t){200==t.code?(e.iavToken=t.data,e.dialogVisible=!0):410==t.code&&e.$confirm("登录状态已失效, 请重新登录","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){e.$router.push("/login")}).catch(function(){console.log("cancel")})})},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},deleteAccount:function(e){var t=this;this.$confirm("确定删除该银行卡吗?","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){var a=new FormData;a.append("fsId",e.fsId),a.append("fsType",e.fsType),w.post("/userOperation/removeUserFundingSource.do",a,{session:!0}).then(function(){t.$message({message:"删除成功！",type:"success"}),t.getBankAccount()},function(){});var s=t.accountList.indexOf(e);-1!==s&&t.accountList.splice(s,1)}).catch(function(){console.log("cancel")})}}},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("common-header"),e._v(" "),a("div",{staticClass:"account"},[a("h1",[e._v("管理银行账号")]),e._v(" "),a("p",{staticClass:"account_tips"},[e._v("我们会保证您的银行-账号信息安全，不会把您的信息透露给其他人")]),e._v(" "),a("ul",{staticClass:"account_list"},[e._l(e.accountList,function(t,s){return a("li",{key:s},[a("p",{staticClass:"bank_name"},[e._v(e._s(t.bankName))]),e._v(" "),a("p",{staticClass:"card_info"},[e._v(e._s(t.fsName))]),e._v(" "),a("el-button",{staticClass:"delete_account",attrs:{size:"small",type:"danger"},on:{click:function(a){a.preventDefault(),e.deleteAccount(t)}}},[e._v("Delete")])],1)}),e._v(" "),a("li",{staticClass:"add_account",on:{click:e.getIavToken}},[a("i",{staticClass:"el-icon-plus"})])],2),e._v(" "),a("el-dialog",{attrs:{title:"添加银行账号",visible:e.dialogVisible,width:"900px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.iavToken?a("iframe",{staticClass:"iav_container",attrs:{src:"http://dwolla.ecard/dwolla_iav.html?t="+e.iavToken,frameborder:"0"}}):e._e()])],1)],1)},staticRenderFns:[]},Q=a("8AGX")(K,X,!1,function(e){a("VKZZ")},null,null).exports;o.default.use(T.a);var Y=new T.a({routes:[{path:"/",name:"/",meta:{requiresAuth:!0},redirect:"/index"},{path:"/index",name:"index",component:D,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:N,meta:{requiresAuth:!1}},{path:"/register",name:"register",component:L,meta:{requiresAuth:!1}},{path:"/resetPassword",name:"resetPassword",component:O,meta:{requiresAuth:!1}},{path:"/personal",name:"personal",component:J,meta:{requiresAuth:!0}},{path:"/account",name:"account",component:Q,meta:{requiresAuth:!0}}]}),ee=(a("RFxO"),a("xg3/")),te=a.n(ee),ae=(a("briU"),a("9rMa"));o.default.use(ae.a);var se=new ae.a.Store({state:{user_info:_.a.get("user_info")?JSON.parse(_.a.get("user_info")):"",user_account:""},mutations:{SAVE_INFO:function(e,t){e.user_info=t,_.a.set("user_info",e.user_info),console.log(t)},SAVE_ACCOUNT:function(e,t){e.user_account=t},SET_AVATAR:function(e,t){e.user_account.avatarUrl=t},REMEMBER_ACCOUNT:function(e,t){var a=_.a.getJSON("login");_.a.set("login",{loginName:a.loginName,isRemember:t},{expires:7})}},actions:{login:function(e,t){(0,e.commit)("SAVE_INFO",t)},user_account:function(e,t){var a=e.commit,s=e.state;w.get("/userOperation/userInfo.do",{session:!0,params:{userId:s.userId},showLoading:!1}).then(function(e){a("SAVE_ACCOUNT",e.data)})},setAvatar:function(e,t){(0,e.commit)("SET_AVATAR",t)},rememberMe:function(e,t){(0,e.commit)("REMEMBER_ACCOUNT",t)}}});o.default.config.productionTip=!1,o.default.use(r.a,{locale:te.a}),new o.default({el:"#app",router:Y,store:se,template:"<App/>",components:{App:k}}),Y.beforeEach(function(e,t,a){e.meta.requiresAuth?se.state.user_info.session?a():a({path:"/login"}):a()}),Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e}},RFxO:function(e,t){},VKZZ:function(e,t){},ZD2v:function(e,t){},c3k3:function(e,t){},dHxb:function(e,t,a){e.exports=a.p+"static/img/card2.93ddfc7.png"},iQH9:function(e,t,a){e.exports=a.p+"static/img/logo.1e5e78d.png"},kpjI:function(e,t){},nqwc:function(e,t){},rxMy:function(e,t,a){e.exports=a.p+"static/img/card1.db9ef90.png"},sQ53:function(e,t){},w3ST:function(e,t,a){"use strict";var s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login_nav"},[t("img",{staticClass:"logo",attrs:{src:a("iQH9"),alt:""}}),this._v(" "),t("div",{staticClass:"nav_btn"},[t("router-link",{attrs:{to:"/login"}},[this._v("Log in"),t("span")]),this._v(" "),t("router-link",{attrs:{to:"/register"}},[this._v("Register"),t("span")]),this._v(" "),this._m(0)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{attrs:{href:"#"}},[this._v("Customer Log in/Register"),t("span")])}]};t.a=s},xWy6:function(e,t){},xgLZ:function(e,t){}},[0]);
//# sourceMappingURL=app.161c4a9b0ec6a12c3727.js.map